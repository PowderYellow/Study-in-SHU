正常是线下闭卷考试，因为疫情我参加的是线上闭卷。



# 考试

## 题型（线下）

### 1 判断

20分 	每题1分  	注意是T和F  不是√和×



### 2 单选

20分 	每题1分



### 3 填空

20分 	每题1分



### 4 简答

20分     3题

描述概念、原理性的



文件共享：符号链接、软链接、硬链接



### 5 综合计算

20分     3题



页面置换算法	OPT	LRU	

要会判断是否缺页（一开始是空的也算缺页）、缺页次数（PPT上有）



磁盘调度算法	计算大题

基本的电梯              （循环什么的不用）



Unix系统的文件类型：正规文件、目录文件、块设备文件、字符设备文件





![image-20220302102453584](https://s2.loli.net/2022/03/02/LtyJhiM2T3IQUuB.png)







![image-20220302102517172](https://s2.loli.net/2022/03/02/GnPL5t2icSHZ6F3.png)













![image-20220302102530670](https://s2.loli.net/2022/03/02/qfaXCbKOPTkil8p.png)





## 题型（线上）



全面复习，存储那块重一点



这次题会比较简单，保证公平



微内核看一下





开卷考试，可以看电子书，PPT，实验指导书

客观题60道

主观题3道

主观题如果不会，那就多回答

主观题都是大的开放的题，有的可以在书上或者实验手册找到







## 复习课

存储器层次结构  看一下

4.2 程序的装入和链接是重点

可重定位

连续分配管理方式	连续分配算法有4个，优缺点要记住

5.2 的顺序图   页表寄存器

地址变化机构

两级页表，多级页表的目的是加快访问速度，降低页表存储空间

反制页表



段式、段页式 都是二维空间



虚拟存储器

局部性原理  为什么引入虚拟存储器的原理

虚存的三个特征  填空题   多次、对换、虚拟性



缺页率和什么有关



5.3 页面置换算法	肯定会考

缺页的百分比，图，肯定会考



5.4 抖动	要看一下，就一些基本概念，没有计算



5.5 段表看一下	

windows不是页，段，段页，它有自己的方式



轮询、中断、DMA、通道	这四个填空要知道

IO系统如何分层次

设备独立性，软件设区，备驱动程序中断还有设备控制器。这五层一个，这个定义要要记清楚



缓冲区   缓冲池的四个工作方式



扫描断法，循环扫描算法，电梯什么算法，这这几个算法当时说了肯定是有一道计算题的



P243	有结构文件	顺序文件、索引文件、索引顺序文件	这三个空知道一下



P251	inode有什么东西，什么作用



符号链接和硬链接的基本思想	很重要



第八章	记一下这个文件存储空间管理方法有空间表法，空间链表法，卫视图法和成组链接法



隐式链接、显示链接



文件类型四种，给大家讲过哈，有正规文件，目录文件，快设备文件和字符。





算法和碎片

页面大小是由硬件CPU决定的，操作系统不决定

页的大小硬件决定，段的是用户决定



进程是在运行时进行地址变换



多级页表会有计算





# 考试答题

## 主观题

### 1

（1）文件目录信息不储存在索引节点中。文件控制块的有序集合称为文件目录，即一个文件控制块就是一个文件目录项。通常，一个文件目录也被看做是一个文件，称为目录文件。由于文件系统中一般有很多文件，文件目录也很大，因此文件目录并不放在主存中，而是放在外存中。

（2）操作系统得到命令后要干的事情是查找目录，得到文件F 的索引信息，这个索引信息可以通过FCB, 也可以通过索引结点。抽出文件名得到的i 结点，按名存取时找到i 结点指针。一个文件有一个FCB 或一个i 结点（索引结点），这便是在文件目录系统做的事情。

当用户要访问一个已存在文件时，系统首先利用用户提供的文件名对目录进行查询，找出该文件的文件控制块或对应索引结点。然后，根据PCB 或索引结点中记录的文件物理地址（盘块号），换算出文件在磁盘上的物理位置。最后，再通过磁盘驱动程序将所需文件读入内存。

（3）去连接(unlink) 。当用户不再使用此文件时，应利用系统调用unlink 去断开此连接，亦即做i.link 的减1 操作。当i. link 减1 后结果为0 时， 表示已无用户需要此文件，此时才能将该文件从文件系统中删除。故在UNIX 系统中并无一条删除文件的系统调用。

（4）删除文件时应先删除文件的目录项，使之成为空项，然后回收文件所占的存储空间。若删除后该用户目录表为空，则表明该用户已脱离了系统，从而可以将主文件目录表中该用户的对应项删除。

（5）当树形目录的层次较多时，如果每次都要使用完整的路径名来查找文件，会使用户感到不便，系统本身也需要花费很多时间进行目录搜索。为此应采取有效措施解决这一问题。考虑到一个进程在一段时间内所访问的文件通常具有局部性，因此可在这段时间内指定某个目录作为当前目录（或称为工作目录）。进程对各文件的访问都是相对千当前目录进行的，此时文件使用的路径名为相对路径。系统允许文件路径往上走，并用" . "表示给定的当前目录，用" .. "表示给定目录（文件）的父目录。

### 2

（1）

设备处理程序通常又称为设备驱动程序，它是I/O 系统的高层与设备控制器之间的通信程序，其主要任务是接收上层软件发来的抽象I/O 要求，如read 或write 命令，再把它转换为具体要求后，发送给设备控制器，启动设备去执行；反之，它也将由设备控制器发来的信号传送给上层软件。由千驱动程序与硬件密切相关，故通常应为每一类设备配置一种驱动程序。例如，打印机和显示器需要不同的驱动程序。

所有与设备相关的代码放在设备驱动程序中，由于设备驱动程序与设备密切相关，因此应为每一类设备配置一个驱动程序。

设备驱动程序的任务是接受来自上层的设备独立性软件的抽象请求，将这些请求转换成设备控制器可以接受的具体命令，再将这些命令发送给设备控制器，并监督这些命令正确执行。若请求到来时设备驱动程序是空闲的，则立即开始执行这个请求；若设备驱动程序正在执行一个请求，则将新到来的请求插入等待队列中。设备驱动程序是操作系统中唯一知道设备控制器中设置了多少个寄存器以及这些寄存器有何用途的程序。

设备驱动程序的处理过程：①将抽象要求转换为具体要求；②检查I/O 请求的合法性；③读出和检查设备的状态；④传送必要参数；⑤设置工作方式； ⑥启动I/O 设备。



（2）

因为设备驱动程序是用来实现I/O 系统的高层与设备控制器之间的通信的。

驱动程序与设备控制器以及I/O 设备的硬件特性紧密相关，对于不同类型的设备，应配置不同的驱动程序。

在不同的操作系统中，所采用的设备处理方式并不完全相同。根据在设备处理时是否设置进程，以及设置什么样的进程，而把设备处理方式进行分类。而现代设备处理方式大多数是不设置专门的设备处理进程的，只为各类设备设置相应的设备驱动程序，供用户或系统进程调用。



### 3

（1）

在请求分页存储管理系统中，若所访问的页面在内存中，其地址变换过程与分页存储管理相同；若访问的页面不在内存，则应先将该页面调入内存，再按照与基本分页存储管理相同的方式进行地址变换。若系统发现所要访问的页面不在内存中，便产生一个缺页中断信号，此时用户程序被中断，控制转到操作系统的缺页中断处理程序。缺页中断处理程序根据该页在外存的位置将其调入内存。在调页过程中，若内存中有空闲空间，则缺页中断处理程序只需把缺页装入任何一个空闲存储块中，再对页表中的相应表项进行修改（如填写物理块号、修改状态位、设置访问字段及修改位初值等）即可；若内存中无空闲空间，则必须先淘汰内存中的某些页面，若被淘汰页曾被修改过，则要将其写回外存。



（2）

缺页中断是一个比较特殊的中断，它与一般中断相比有着明显的区别，主要表现在以下方面：

① 在指令的执行期间产生和处理缺页中断。通常， CPU 是在指令执行完毕后检查是否有中断请求到达，若有，便响应。而缺页中断是在一条指令的执行期间发现要访问的指令和数据不在内存时产生和处理的。

② 一条指令可以产生多个缺页中断。例如，一条双操作数的指令，每个操作数都不在内存中，则这条指令执行时至少将产生两个缺页中断。



（3）

因为中断是由执行指令自己产生的，而且还没有执行完，故中断返回时应当重新执行被中断的那一条指令。



（4）

页面置换算法（也称为页面淘汰算法）是用来选择换出页面的算法。在请求页式存储管理方式中，由于一个进程运行时不是所有页面都在内存中，因此会出现缺页中断，此时内存没有空闲的物理块，就需要置换出内存中的一页，具体置换出哪一页面是由页面置换算法决定的，页面置换算法的优劣直接影响到系统的效率。

当发生缺页中断后，系统不一定会执行页面置换算法。因为发生缺页中断仅仅说明需要执行的页面没有在内存中，如果内存空间中还有空闲块，只需用缺页中断处理程序把需要的页面从外存调入内存即可，不需要页面置换算法；只有内存中没有空闲块时才需要页面置换算法。所以，缺页中断不一定导致页面置换算法的执行。



（5）

① 最佳置换算法 OPT

② 先进先出算法 FIFO

③ 最近最少使用算法 LRU

④ 时钟置换算法 CLOCK

⑤ 改进型时钟算法

⑥ 最不常用置换算法 LFU

⑦ 页面缓冲算法 PBA











































